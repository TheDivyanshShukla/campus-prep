{% extends "base.html" %}
{% block title %}Practice Sets | {{ subject.name }}{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto py-10 px-4 space-y-8">
  <div class="flex items-center justify-between flex-wrap gap-4">
    <div>
      <a href="{% url 'practice_index' %}" class="text-xs text-muted-foreground hover:text-foreground transition-colors">â† Back to Practice</a>
      <h1 class="text-2xl font-extrabold tracking-tight mt-1">
        {{ subject.name }}
        {% if unit %} â€” {{ unit.name }}{% endif %}
      </h1>
    </div>
    {# Unit filter pills #}
    <div class="flex flex-wrap gap-2">
      <a href="?{% if not unit %}{% else %}{% endif %}"
         class="text-xs font-bold px-3 py-1.5 rounded-full border border-border {% if not unit %}bg-foreground text-background{% else %}text-muted-foreground hover:bg-muted{% endif %} transition-colors">
        All Units
      </a>
      {% for u in units %}
      <a href="?unit={{ u.id }}"
         class="text-xs font-bold px-3 py-1.5 rounded-full border border-border {% if unit and unit.id == u.id %}bg-foreground text-background{% else %}text-muted-foreground hover:bg-muted{% endif %} transition-colors">
        {{ u.number }}. {{ u.name }}
      </a>
      {% endfor %}
    </div>
  </div>

  {% if sets %}
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
    {% for qset in sets %}
    <div class="bg-card border border-border rounded-2xl p-5 shadow-sm flex flex-col gap-3 hover:border-indigo-500/50 transition-colors">
      <div class="flex items-start justify-between gap-2">
        <h2 class="font-bold text-sm text-foreground leading-snug">{{ qset.title }}</h2>
        {% if qset.is_ai_generated %}
        <span class="text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full bg-violet-500/10 text-violet-500 flex-shrink-0">AI</span>
        {% endif %}
      </div>
      {% if qset.unit %}
      <p class="text-xs text-muted-foreground">Unit: {{ qset.unit.name }}</p>
      {% else %}
      <p class="text-xs text-muted-foreground">All Units</p>
      {% endif %}
      <div class="flex items-center justify-between mt-auto pt-2 border-t border-border">
        <span class="text-xs text-muted-foreground">{{ qset.question_count }} questions</span>
        <a href="{% url 'practice_quiz' qset.id %}"
           class="px-4 py-1.5 rounded-xl bg-indigo-500/10 text-indigo-500 border border-indigo-500/30 text-xs font-bold hover:bg-indigo-500/20 transition-colors">
          Start â†’
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="bg-card border border-border rounded-2xl p-12 text-center text-muted-foreground">
    <span class="text-5xl">ğŸ“­</span>
    <p class="mt-4 font-bold">No pre-generated sets yet</p>
    <p class="text-sm mt-1">Go back and click <strong>Generate with AI</strong> to create questions instantly.</p>
    <a href="{% url 'practice_index' %}" class="inline-block mt-5 px-5 py-2.5 rounded-xl bg-indigo-500/10 text-indigo-500 border border-indigo-500/30 text-sm font-bold hover:bg-indigo-500/20 transition-colors">
      â† Back to Practice
    </a>
  </div>
  {% endif %}
</div>
{% endblock %}
